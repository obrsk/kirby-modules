![Kirby Modules](https://user-images.githubusercontent.com/7975568/93752618-37d29000-fbff-11ea-8276-abd679ef92ae.png)

–≠—Ç–æ—Ç –ø–ª–∞–≥–∏–Ω —É–ø—Ä–æ—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—å–Ω—ã—Ö –≤–µ–±-—Å–∞–π—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é Kirby.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ú–æ–¥—É–ª–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ `site/modules` –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ blueprints –∏ templates.
- –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤ —Ä–∞–∑–¥–µ–ª–µ `modules` –±–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª—é–±–æ–≥–æ –¥—Ä—É–≥–æ–≥–æ —Ñ–∞–π–ª–∞.
- –ö –º–æ–¥—É–ª—è–º –Ω–µ–ª—å–∑—è –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –Ω–∞–ø—Ä—è–º—É—é, –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –∞–Ω–∫–æ—Ä–æ–º.
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ —Å–∫—Ä—ã—Ç –Ω–∞ –ø–∞–Ω–µ–ª–∏.
- –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –º–æ–¥—É–ª–µ–π –Ω–∞ –∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö —Å –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–∫–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –Ω–∞ –ø–∞–Ω–µ–ª–∏.

![Preview](https://user-images.githubusercontent.com/7975568/94016693-bb7eaf00-fdae-11ea-8114-f0862391ff91.gif)

## –ß—Ç–æ —Ç–∞–∫–æ–µ –º–æ–¥—É–ª—å?

–ú–æ–¥—É–ª—å - —ç—Ç–æ –æ–±—ã—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Ç–µ–º, —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–æ–¥—É–ª–µ–π.
–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞–∫ –º–æ–¥—É–ª–∏ –±–µ–∑ —É—â–µ—Ä–±–∞ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–¥—Å—Ç—Ä–∞–Ω–∏—Ü.

```
üìÑ Page
  üìÑ Subpage A
  üìÑ Subpage B
  üóÇ Modules
    üìÑ Module A
    üìÑ Module B
```

Blueprints –∏ Templates –º–æ–¥—É–ª–µ–π –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–µ site/modules. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª–∏ –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö –∏ –¥–µ–ª–∏—Ç—å—Å—è –∏–º–∏ —Å –¥—Ä—É–≥–∏–º–∏ –ª—é–¥—å–º–∏.

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

–î–æ–±–∞–≤—å—Ç–µ —Ä–∞–∑–¥–µ–ª `modules` –∫ –ª—é–±–æ–º—É blueprint —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–¥—É–ª–µ–π –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
 
–í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–¥—É–ª–∏, –ø–æ–º–µ—â–∞—è –∏—Ö –≤ –ø–∞–ø–∫—É `site/modules`. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞–ø–∫—É `site/modules/text` —Å template `text.php` –∏ blueprint `text.yml`.

–ó–∞—Ç–µ–º –≤ template —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `<?php $page->renderModules() ?>`–¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –º–æ–¥—É–ª–µ–π.

### –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

#### `site/blueprints/pages/default.yml`

```yml
title: Default Page
sections:
  modules: true
```

#### `site/templates/default.php`

```php
<?php $page->renderModules() ?>
```

### –ü—Ä–∏–º–µ—Ä –º–æ–¥—É–ª—è

#### `site/modules/text/text.yml`

```yml
title: Text Module
fields:
  textarea: true
```

#### `site/modules/text/text.php`

```php
<div class="module" class="<?= $module->moduleId() ?>" id="<?= $module->uid() ?>">
  <h1><?= $module->title() ?></h1>
  <?= $module->text()->kt() ?>
</div>
```

–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –æ–±—ä–µ–∫—Ç—É –º–æ–¥—É–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ø–æ–º–æ—â—å—é `$module` –∏ –∫ –æ–±—ä–µ–∫—Ç—É —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ø–æ–º–æ—â—å—é `$page`.
–ú–µ—Ç–æ–¥ `$module->moduleId()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä ID –º–æ–¥—É–ª—è, –Ω–∞–ø—Ä–∏–º–µ—Ä `module_text` –∏–ª–∏ `module_gallery`.

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

### Blueprint –º–æ–¥—É–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–¥—É–ª—å `text` –±—É–¥–µ—Ç first/default –æ–ø—Ü–∏–µ–π –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ "Add page".
–í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –µ–≥–æ –≤ —Å–≤–æ–µ–º `site/config/config.php`:

```php
return [
  'medienbaecker.modules.default' => 'gallery'
];
```

### –ê–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π

–í—ã –º–æ–∂–µ—Ç–µ –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—É–±–ª–∏–∫–∞—Ü–∏—é –º–æ–¥—É–ª–µ–π –≤ –≤–∞—à–µ–º `site/config/config.php`:

```php
return [
  'medienbaecker.modules.autopublish' => true
];
```

### –ö–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å –º–æ–¥—É–ª—è

–≠—Ç–æ—Ç –ø–ª–∞–≥–∏–Ω —Å–æ–∑–¥–∞–µ—Ç –º–æ–¥–µ–ª—å `ModulePage`, –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã.
–í—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —ç—Ç—É –º–æ–¥–µ–ª—å —Å–≤–æ–µ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª—å—é:

```php
// site/config/config.php

return [
  'medienbaecker.modules.model' => 'CustomModulePage'
];
```

```php
// site/models/module.php

class CustomModulePage extends ModulePage {
  // methods...
}
```
